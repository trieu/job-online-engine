(function(a){jQuery&&function(){jQuery.extend(jQuery.fn,{contextMenu:function(b,f){if(b.menu==undefined)return false;if(b.inSpeed==undefined)b.inSpeed=150;if(b.outSpeed==undefined)b.outSpeed=75;if(b.leftButton==undefined)b.leftButton=false;if(b.inSpeed==0)b.inSpeed=-1;if(b.outSpeed==0)b.outSpeed=-1;a(this).each(function(){var e=a(this),j=a(e).offset();a("#"+b.menu).addClass("contextMenu");a(this).mousedown(function(k){a(this).mouseup(function(g){var l=a(this);a(this).unbind("mouseup");if(k.button==
2||b.leftButton==true){a(".contextMenu").hide();var c=a("#"+b.menu);if(a(e).hasClass("disabled"))return false;var d={},h,i;if(self.innerHeight){d.pageYOffset=self.pageYOffset;d.pageXOffset=self.pageXOffset;d.innerHeight=self.innerHeight;d.innerWidth=self.innerWidth}else if(document.documentElement&&document.documentElement.clientHeight){d.pageYOffset=document.documentElement.scrollTop;d.pageXOffset=document.documentElement.scrollLeft;d.innerHeight=document.documentElement.clientHeight;d.innerWidth=
document.documentElement.clientWidth}else if(document.body){d.pageYOffset=document.body.scrollTop;d.pageXOffset=document.body.scrollLeft;d.innerHeight=document.body.clientHeight;d.innerWidth=document.body.clientWidth}g.pageX?h=g.pageX:h=g.clientX+d.scrollLeft;g.pageY?i=g.pageY:h=g.clientY+d.scrollTop;a(document).unbind("click");a(c).css({top:i,left:h}).fadeIn(b.inSpeed);a(c).find("A").mouseover(function(){a(c).find("LI.hover").removeClass("hover");a(this).parent().addClass("hover")}).mouseout(function(){a(c).find("LI.hover").removeClass("hover")});
a(document).keypress(function(m){switch(m.keyCode){case 38:if(a(c).find("LI.hover").size()==0)a(c).find("LI:last").addClass("hover");else{a(c).find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover");a(c).find("LI.hover").size()==0&&a(c).find("LI:last").addClass("hover")}break;case 40:if(a(c).find("LI.hover").size()==0)a(c).find("LI:first").addClass("hover");else{a(c).find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover");a(c).find("LI.hover").size()==
0&&a(c).find("LI:first").addClass("hover")}break;case 13:a(c).find("LI.hover A").trigger("click");break;case 27:a(document).trigger("click")}});a("#"+b.menu).find("A").unbind("click");a("#"+b.menu).find("LI:not(.disabled) A").click(function(){a(document).unbind("click").unbind("keypress");a(".contextMenu").hide();f&&f(a(this).attr("href").substr(1),a(l),{x:h-j.left,y:i-j.top,docX:h,docY:i});return false});setTimeout(function(){a(document).click(function(){a(document).unbind("click").unbind("keypress");
a(c).fadeOut(b.outSpeed);return false})},0)}})});if(a.browser.mozilla)a("#"+b.menu).each(function(){a(this).css({MozUserSelect:"none"})});else a.browser.msie?a("#"+b.menu).each(function(){a(this).bind("selectstart.disableTextSelect",function(){return false})}):a("#"+b.menu).each(function(){a(this).bind("mousedown.disableTextSelect",function(){return false})});a(e).add("UL.contextMenu").bind("contextmenu",function(){return false})});return a(this)},disableContextMenuItems:function(b){if(b==undefined){a(this).find("LI").addClass("disabled");
return a(this)}a(this).each(function(){if(b!=undefined)for(var f=b.split(","),e=0;e<f.length;e++)a(this).find('A[href="'+f[e]+'"]').parent().addClass("disabled")});return a(this)},enableContextMenuItems:function(b){if(b==undefined){a(this).find("LI.disabled").removeClass("disabled");return a(this)}a(this).each(function(){if(b!=undefined)for(var f=b.split(","),e=0;e<f.length;e++)a(this).find('A[href="'+f[e]+'"]').parent().removeClass("disabled")});return a(this)},disableContextMenu:function(){a(this).each(function(){a(this).addClass("disabled")});
return a(this)},enableContextMenu:function(){a(this).each(function(){a(this).removeClass("disabled")});return a(this)},destroyContextMenu:function(){a(this).each(function(){a(this).unbind("mousedown").unbind("mouseup")});return a(this)}})}(jQuery)})(jQuery);